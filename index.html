<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>starks-proofgen example</title>
  </head>
  <body>
    <script type="module">
      import init, {hashtest,generate_program,starks_proofgen,generate_program_hash,starks_proofgen_with_program_name,output_program_string,output_inputs_string,output_option_string,init_panic_hook} from "./pkg/distaff.js";
      // import init from "./pkg/starks_proofgen.js";
      init().then(m => {
        console.log(1 , m)
                init_panic_hook()
                // merkle hash
                let b = output_inputs_string("212536982540424896447084657753041636028,62602682562930640774650326019494833305","222681710225944171422886330904366434491,0,68557181380680206116221109328877907882,0,68877343039486781374307978289172110465","269290709893687070873337820426365295693,0,189343189959438333548680818555536049573,1,154997781429020006743060100894063327107")
                  
                //⬇️ 这是三个节点的！           
                // let b = output_inputs_string("191316898741855275043382750345139265285,296803305817646664683329347328201596143","222681710225944171422886330904366434491,0,68877343039486781374307978289172110465","269290709893687070873337820426365295693,1,154997781429020006743060100894063327107")
                // let b = output_inputs_string("","7,2,3","6,2,6")
                // let b = output_inputs_string("","7,2,5,2,5,7,11,24","3,5,13,4,0,98,3,2")

                // let b = output_inputs_string("826,250","826","")

                // console.log("11")
                let c = output_option_string()
                // let d = generate_program("begin read lt.128 if.true pad.1 else push.1 read dup push.1 while.true roll.4 ne if.true swap push.1 add dup push.2 ne if.true  swap dup push.1 else pad.3 end else push.1 pad end end end end")
                // let g = generate_program_hash("begin read lt.128 if.true pad.1 else push.1 read dup push.1 while.true roll.4 ne if.true swap push.1 add dup push.2 ne if.true  swap dup push.1 else pad.3 end else push.1 pad end end end end")


                // let d = generate_program("begin push.0 push.1 push.2 push.4 push.1 read dup push.1 while.true roll.4 ne if.true swap push.1 add dup push.5 ne if.true swap dup push.1 else pad.3 end else push.1 pad end end end")
                // let d = generate_program("begin push.156 push.496 push.408 push.410 push.392 push.608 push.704 push.418 push.116 push.104 push.764 push.458 push.96 push.702 push.360 push.626 push.1 read dup push.1 while.true roll.4 ne if.true swap push.1 add dup push.17 ne if.true swap dup push.1 else pad.3 end else push.1 pad end end end")
                // let g = generate_program_hash("begin push.156 push.496 push.408 push.410 push.392 push.608 push.704 push.418 push.116 push.104 push.764 push.458 push.96 push.702 push.360 push.626 push.1 read dup push.1 while.true roll.4 ne if.true swap push.1 add dup push.17 ne if.true swap dup push.1 else pad.3 end else push.1 pad end end end")

                // let d = generate_program_alone("begin add push.5 mul push.7 end")
                // let f = generate_program("begin push.25 read lt.128 if.true	pad.1 else push.0 push.1 push.2 push.4 push.1 read dup push.1 while.true roll.4 ne if.true swap push.1 add dup push.5 ne if.true swap dup push.1 else pad.3 end else push.1 pad end end end end")

                // console.log("11122")
                // let d = generate_program("begin pad.1 repeat.3 read.ab dup.2 lt.128 if.true pad.1 add else swap.1 end sub dup.1 mul add end end")
                // let d = generate_program("begin pad.1 repeat.8 read.ab dup.2 lt.128 if.true pad.1 add else swap.1 end sub dup.1 mul add end end")


                // let d = generate_program("begin push.1 read dup push.1 while.true roll.4 ne if.true swap push.1 add dup push.2 ne if.true swap dup push.1 else pad.3 end else push.1 pad end end end")
                // let g = generate_program_hash("begin push.1 read dup push.1 while.true roll.4 ne if.true swap push.1 add dup push.2 ne if.true swap dup push.1 else pad.3 end else push.1 pad end end end")


                // let d = generate_program("begin push.1 read dup push.1 while.true roll.4 ne if.true swap push.1 add dup push.3 ne if.true swap dup push.1 else pad.3 end else push.1 pad end end end")
                // let g = generate_program_hash("begin push.1 read dup push.1 while.true roll.4 ne if.true swap push.1 add dup push.3 ne if.true swap dup push.1 else pad.3 end else push.1 pad end end end")

                // let d = generate_program("begin read.a gt.128 end")
                // let g = generate_program_hash("begin read.a gt.128 end")

                let f = generate_program("begin read.ab rmerkle.3 swap.2 drop.2 swap.1 roll.4 eq  if.true eq end end")

                // let g = generate_program_hash("begin read.ab rmerkle.3 swap.2 drop.2 swap.1 roll.4 eq  if.true eq end end")
                console.log(starks_proofgen(f,b,1,c))

                // console.log(g)

              }).catch(console.error);


      </script>
  </body>
</html>